import{j as e}from"./index-DDk1oefv.js";import{r as x}from"./react-vendor-xiFAdxLt.js";import{C as O,a3 as J,c as R,a4 as I,a5 as B,a as T}from"./ui-vendor-B0ZOy8uN.js";function z({events:o,onEventClick:g}){const[d,N]=x.useState(new Date),[E,A]=x.useState([]),[c,M]=x.useState("decade"),j=["January","February","March","April","May","June","July","August","September","October","November","December"],k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];x.useEffect(()=>{L()},[d,o]);const L=()=>{const s=d.getFullYear(),t=d.getMonth(),a=new Date(s,t,1),r=new Date(s,t+1,0),n=new Date(a);n.setDate(n.getDate()-n.getDay());const l=new Date(r);l.setDate(l.getDate()+(6-l.getDay()));const p=[],f=new Date;f.setHours(0,0,0,0);for(let h=new Date(n);h<=l;h.setDate(h.getDate()+1)){const w=o.filter(i=>new Date(i.vesting_date).toDateString()===h.toDateString());p.push({date:new Date(h),isCurrentMonth:h.getMonth()===t,isToday:h.toDateString()===f.toDateString(),events:w})}A(p)},S=s=>{const t=new Date(d);s==="prev"?t.setMonth(t.getMonth()-1):t.setMonth(t.getMonth()+1),N(t)},Y=s=>{const t=new Date(d);s==="prev"?t.setFullYear(t.getFullYear()-1):t.setFullYear(t.getFullYear()+1),N(t)},_=s=>{const t=new Date(d),a=s==="prev"?-10:10;t.setFullYear(t.getFullYear()+a),N(t)},V=()=>{N(new Date)},P=()=>{const s=d.getFullYear(),t=[];for(let a=0;a<12;a++){const r=o.filter(n=>{const l=new Date(n.vesting_date);return l.getFullYear()===s&&l.getMonth()===a});t.push({month:a,monthName:j[a],events:r,totalShares:r.reduce((n,l)=>n+l.shares_to_vest,0),eventCount:r.length})}return t},u=x.useMemo(()=>P(),[d,o]),F=x.useMemo(()=>{const s=d.getFullYear(),t=d.getMonth();return o.filter(a=>{const r=new Date(a.vesting_date);return r.getFullYear()===s&&r.getMonth()===t}).length},[o,d]),y=x.useMemo(()=>{const s=o.map(r=>new Date(r.vesting_date).getFullYear()).filter(r=>!Number.isNaN(r));if(s.length===0){const r=d.getFullYear(),n=r+9;return{start:r,end:n,label:`Upcoming 10 Years (${r} – ${n})`,derivedFromEvents:!1}}const t=Math.min(...s),a=Math.max(...s);return{start:t,end:a,label:`Vesting Outlook (${t} – ${a})`,derivedFromEvents:!0}},[o,d]),m=x.useMemo(()=>{const{start:s,end:t}=y;if(s===void 0||t===void 0||t<s)return[];const a=t-s+1;return Array.from({length:Math.max(a,0)},(r,n)=>{const l=s+n,p=o.filter(i=>new Date(i.vesting_date).getFullYear()===l),f=p.reduce((i,v)=>i+v.shares_to_vest,0),h=p.reduce((i,v)=>{const $=new Date(v.vesting_date).getMonth();return i[$]=(i[$]??0)+1,i},{}),[w]=Object.entries(h).sort(([,i],[,v])=>v-i)[0]??[];return{year:l,eventCount:p.length,totalShares:f,peakMonth:w!==void 0?j[Number(w)]:null,sampleEvents:p.slice(0,3)}})},[o,j,y]),b=x.useMemo(()=>{if(m.length===0)return{totalEvents:0,totalShares:0,activeYears:0,peakYear:null};const s=m.reduce((n,l)=>n+l.eventCount,0),t=m.reduce((n,l)=>n+l.totalShares,0),a=m.filter(n=>n.eventCount>0).length,r=m.reduce((n,l)=>l.eventCount>n.eventCount?l:n,m[0]);return{totalEvents:s,totalShares:t,activeYears:a,peakYear:r.eventCount>0?r.year:null}},[m]),U=x.useMemo(()=>{switch(c){case"monthly":return F;case"annually":return u.reduce((s,t)=>s+t.eventCount,0);case"decade":return m.reduce((s,t)=>s+t.eventCount,0);default:return 0}},[c,F,u,m]),C=s=>{switch(s){case"cliff":return"bg-orange-500";case"time_based":return"bg-blue-500";case"performance_based":return"bg-purple-500";default:return"bg-gray-500"}},D=s=>{switch(s){case"due":return"border-red-500 bg-red-50";case"pending":return"border-blue-500 bg-blue-50";case"vested":return"border-green-500 bg-green-50";case"exercised":case"transferred":return"border-gray-500 bg-gray-50";default:return"border-gray-300 bg-gray-50"}};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c==="monthly"?`${j[d.getMonth()]} ${d.getFullYear()}`:c==="annually"?`${d.getFullYear()}`:y.label}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:V,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition",children:"Today"}),e.jsx("div",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-900 text-sm font-semibold text-white",title:"Total vesting events in view",children:U})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>M("monthly"),className:`flex items-center gap-2 px-3 py-1 rounded-md text-sm font-medium transition ${c==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(O,{className:"w-4 h-4"}),"Monthly"]}),e.jsxs("button",{onClick:()=>M("annually"),className:`flex items-center gap-2 px-3 py-1 rounded-md text-sm font-medium transition ${c==="annually"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(J,{className:"w-4 h-4"}),"Annually"]}),e.jsxs("button",{onClick:()=>M("decade"),className:`flex items-center gap-2 px-3 py-1 rounded-md text-sm font-medium transition ${c==="decade"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(R,{className:"w-4 h-4"}),"10-Year Outlook"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{c==="monthly"?S("prev"):c==="annually"?Y("prev"):y.derivedFromEvents||_("prev")},className:"p-2 hover:bg-gray-100 rounded-md transition",children:e.jsx(I,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>{c==="monthly"?S("next"):c==="annually"?Y("next"):y.derivedFromEvents||_("next")},className:"p-2 hover:bg-gray-100 rounded-md transition",children:e.jsx(B,{className:"w-5 h-5 text-gray-600"})})]})]})]}),e.jsx("div",{className:"p-4",children:c==="monthly"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:k.map(s=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:E.map((s,t)=>e.jsxs("div",{className:`min-h-[100px] p-2 border rounded-lg ${s.isCurrentMonth?"bg-white":"bg-gray-50"} ${s.isToday?"ring-2 ring-blue-500":"border-gray-200"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${s.isCurrentMonth?"text-gray-900":"text-gray-400"} ${s.isToday?"text-blue-600":""}`,children:s.date.getDate()}),e.jsxs("div",{className:"space-y-1",children:[s.events.slice(0,3).map((a,r)=>e.jsxs("div",{onClick:()=>g==null?void 0:g(a),className:`p-1 rounded text-xs cursor-pointer hover:opacity-80 transition ${D(a.status)}`,title:`${a.employee_name} - ${a.plan_name} (${a.shares_to_vest} shares)`,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C(a.event_type)}`}),e.jsx("span",{className:"truncate font-medium",children:a.employee_name.split(" ")[0]})]}),e.jsxs("div",{className:"text-gray-600 truncate",children:[Math.floor(a.shares_to_vest).toLocaleString()," shares"]})]},a.id)),s.events.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center py-1",children:["+",s.events.length-3," more"]})]})]},t))})]}):c==="annually"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(s=>e.jsxs("div",{className:`p-4 rounded-lg border transition hover:shadow-md ${s.eventCount>0?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.monthName}),s.eventCount>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:[s.eventCount," events"]})]}),s.eventCount>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"font-medium",children:Math.floor(s.totalShares).toLocaleString()})]}),e.jsxs("div",{className:"space-y-1",children:[s.events.slice(0,3).map(t=>e.jsxs("div",{onClick:()=>g==null?void 0:g(t),className:"flex items-center justify-between p-2 bg-white rounded cursor-pointer hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C(t.event_type)}`}),e.jsx("span",{className:"text-sm font-medium truncate",children:t.employee_name.split(" ")[0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.vesting_date).getDate()}),e.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${D(t.status)}`,children:t.status.charAt(0).toUpperCase()})]})]},t.id)),s.events.length>3&&e.jsx("div",{className:"text-center py-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.events.length-3," more events"]})})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(T,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"No events"})]})]},s.month))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:[d.getFullYear()," Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Events:"}),e.jsx("span",{className:"ml-2 font-medium",children:u.reduce((s,t)=>s+t.eventCount,0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"ml-2 font-medium",children:Math.floor(u.reduce((s,t)=>s+t.totalShares,0)).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Active Months:"}),e.jsx("span",{className:"ml-2 font-medium",children:u.filter(s=>s.eventCount>0).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Peak Month:"}),e.jsx("span",{className:"ml-2 font-medium",children:u.reduce((s,t)=>t.eventCount>s.eventCount?t:s).monthName})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsxs("div",{className:`p-4 rounded-lg border transition hover:shadow-md ${s.eventCount>0?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.year}),s.eventCount>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:[s.eventCount," events"]})]}),s.eventCount>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"font-medium",children:Math.floor(s.totalShares).toLocaleString()})]}),s.peakMonth&&e.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Peak month: ",e.jsx("span",{className:"font-medium text-gray-900",children:s.peakMonth})]}),e.jsx("div",{className:"space-y-2",children:s.sampleEvents.map(t=>e.jsxs("div",{onClick:()=>g==null?void 0:g(t),className:"flex items-center justify-between p-2 bg-white rounded cursor-pointer border border-gray-200 hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C(t.event_type)}`}),e.jsx("span",{className:"text-sm font-medium truncate",children:t.employee_name.split(" ")[0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[j[new Date(t.vesting_date).getMonth()]," ",new Date(t.vesting_date).getDate()]}),e.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${D(t.status)}`,children:t.status.charAt(0).toUpperCase()})]})]},t.id))}),s.sampleEvents.length<s.eventCount&&e.jsx("div",{className:"text-center py-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.eventCount-s.sampleEvents.length," more events"]})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(T,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"No events"})]})]},s.year))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Upcoming 10-Year Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Events:"}),e.jsx("span",{className:"ml-2 font-medium",children:b.totalEvents})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"ml-2 font-medium",children:Math.floor(b.totalShares).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Active Years:"}),e.jsx("span",{className:"ml-2 font-medium",children:b.activeYears})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Peak Year:"}),e.jsx("span",{className:"ml-2 font-medium",children:b.peakYear??"—"})]})]})]})]})}),e.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Event Types:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-gray-600",children:"Cliff"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"Vesting"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-gray-600",children:"Performance"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-red-500 bg-red-50"}),e.jsx("span",{className:"text-gray-600",children:"Due"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 bg-blue-50"}),e.jsx("span",{className:"text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-green-500 bg-green-50"}),e.jsx("span",{className:"text-gray-600",children:"Vested"})]})]})]})})]})}export{z as V};
