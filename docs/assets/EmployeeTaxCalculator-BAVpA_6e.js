import{j as e,a as v,s as f}from"./index-CHcuUdej.js";import{r as m}from"./react-vendor-xiFAdxLt.js";import{k as A,Y as T,F as R,q as w}from"./ui-vendor-a8g5-7pO.js";import"./supabase-vendor-B-LuImWU.js";function L({vestedShares:l,currentPrice:s,exercisePrice:n=0}){const[i,u]=m.useState(0),[c,h]=m.useState(0),t=(s-n)*l,o=i+t+c,d=a=>{if(a<=0)return 0;let r=0;return a>1e6&&(r+=(a-1e6)*.25,a=1e6),a>5e5&&(r+=(a-5e5)*.2,a=5e5),a>25e4&&(r+=(a-25e4)*.15,a=25e4),a>1e5&&(r+=(a-1e5)*.1,a=1e5),a>5e4&&(r+=(a-5e4)*.05),r},b=d(i),p=d(o),x=p-b,y=t-x,j=t>0?x/t*100:0,N=()=>{const a=`
TAX CALCULATION REPORT
Generated: ${new Date().toLocaleString()}

INCOME BREAKDOWN
Annual Income: ${i.toLocaleString()} SAR
Share Capital Gain: ${t.toLocaleString()} SAR
Other Capital Gains: ${c.toLocaleString()} SAR
Total Taxable Income: ${o.toLocaleString()} SAR

SHARE DETAILS
Vested Shares: ${l.toLocaleString()}
Current Price: ${s.toFixed(2)} SAR
Exercise Price: ${n.toFixed(2)} SAR
Gain per Share: ${(s-n).toFixed(2)} SAR

TAX CALCULATION
Tax on Salary Only: ${b.toLocaleString()} SAR
Tax on Total Income: ${p.toLocaleString()} SAR
Additional Tax from Shares: ${x.toLocaleString()} SAR
Effective Tax Rate on Shares: ${j.toFixed(2)}%

NET RESULTS
Gross Share Gain: ${t.toLocaleString()} SAR
Tax on Share Gain: ${x.toLocaleString()} SAR
Net Gain After Tax: ${y.toLocaleString()} SAR

DISCLAIMER
This calculation is for estimation purposes only. Please consult with a qualified tax advisor for accurate tax planning.
    `,r=new Blob([a],{type:"text/plain"}),S=URL.createObjectURL(r),g=document.createElement("a");g.href=S,g.download=`tax-calculation-${new Date().toISOString().split("T")[0]}.txt`,g.click(),URL.revokeObjectURL(S)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Tax Calculator"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Estimate your tax liability on vested shares"})]})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Share Capital Gain"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vested Shares"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gain per Share"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[(s-n).toFixed(2)," SAR"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Capital Gain from Shares"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[t.toLocaleString()," SAR"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Annual Income (Salary) - SAR"}),e.jsx("input",{type:"number",value:i||"",onChange:a=>u(Number(a.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your annual income"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Capital Gains - SAR"}),e.jsx("input",{type:"number",value:c||"",onChange:a=>h(Number(a.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter other capital gains"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Tax Calculation Results"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Taxable Income"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[o.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tax on Salary Only"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[b.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-300",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tax on Total Income"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[p.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-gray-300",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Additional Tax from Shares"}),e.jsxs("span",{className:"font-bold text-red-600",children:[x.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Effective Tax Rate on Shares"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[j.toFixed(2),"%"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Net Gain After Tax"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[y.toLocaleString()," SAR"]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Calculation"})]}),e.jsx("button",{className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(w,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Important Disclaimer"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"This calculation is for estimation purposes only and uses Saudi tax brackets. Actual tax liability may vary based on your specific circumstances. Please consult with a qualified tax advisor or accountant for accurate tax planning and filing."})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Saudi Tax Brackets (2024)"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsx("p",{children:"• 0% on income up to 50,000 SAR"}),e.jsx("p",{children:"• 5% on income from 50,001 to 100,000 SAR"}),e.jsx("p",{children:"• 10% on income from 100,001 to 250,000 SAR"}),e.jsx("p",{children:"• 15% on income from 250,001 to 500,000 SAR"}),e.jsx("p",{children:"• 20% on income from 500,001 to 1,000,000 SAR"}),e.jsx("p",{children:"• 25% on income above 1,000,000 SAR"})]})]})]})]})}function $(){var h;const{t:l}=v(),[s,n]=m.useState(null),[i,u]=m.useState(!0);m.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:{user:t}}=await f.auth.getUser();if(!t)return;const{data:o}=await f.from("employees").select("id").eq("user_id",t.id).maybeSingle();if(!o)return;const{data:d}=await f.from("grants").select(`
          vested_shares,
          incentive_plans (
            exercise_price
          )
        `).eq("employee_id",o.id).eq("status","active").maybeSingle();d&&n(d)}catch(t){console.error("Error loading data:",t)}finally{u(!1)}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l("employeeTaxCalculator.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:l("employeeTaxCalculator.description")})]}),e.jsx(L,{vestedShares:s.vested_shares,currentPrice:85.5,exercisePrice:((h=s.incentive_plans)==null?void 0:h.exercise_price)||0})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:l("employeeTaxCalculator.noGrantData")})})}export{$ as default};
