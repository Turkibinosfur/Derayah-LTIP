import{j as e,s as u}from"./index-CHcuUdej.js";import{b as E,r as n,u as L}from"./react-vendor-xiFAdxLt.js";import{g as k,l as A,m as S,q as C,b as I}from"./ui-vendor-a8g5-7pO.js";import"./supabase-vendor-B-LuImWU.js";function Q(){const p=E(),s=n.useMemo(()=>p.state??null,[p.state]),[b,h]=n.useState((s==null?void 0:s.presetEmail)??"employee@example.com"),[g,x]=n.useState((s==null?void 0:s.presetPassword)??"Employee123!"),[o,a]=n.useState(!1),[f,t]=n.useState(""),y=L();n.useEffect(()=>{s!=null&&s.presetEmail&&h(s.presetEmail),s!=null&&s.presetPassword&&x(s.presetPassword)},[s]);const j=async(r,d)=>{t(""),a(!0);try{console.log("Attempting Supabase auth login with email:",r);const{data:l,error:c}=await u.auth.signInWithPassword({email:r,password:d});if(c){console.error("Auth error:",c),t(`Login Failed: ${c.message}`),a(!1);return}if(!l.user){t("Login Failed: No user data returned"),a(!1);return}console.log("Auth successful, checking employee record...");const{data:m,error:w}=await u.from("employees").select("id, company_id, first_name_en, last_name_en, email, user_id").eq("user_id",l.user.id).maybeSingle();if(w){console.error("Error finding employee:",w),t("Login Failed: Database error querying employee"),a(!1);return}if(!m){t("Login Failed: No employee record found for this user. Please contact your administrator."),a(!1);return}console.log("Employee found:",m),sessionStorage.setItem("employee",JSON.stringify(m)),console.log("Login successful, redirecting to dashboard..."),y("/employee/dashboard")}catch(l){console.error("Login error:",l),t("Login Failed: An unexpected error occurred. Please try again.")}finally{a(!1)}},N=async r=>{r.preventDefault(),await j(b,g)},v=()=>j("test9@test.com","Na101918!@"),i=async(r,d)=>{t(""),a(!0);try{await u.auth.signInWithPassword({email:r,password:d}),sessionStorage.removeItem("employee"),y("/dashboard")}catch(l){console.error("Quick admin login failed:",l),t(`Quick login failed for ${r}`)}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Employee Portal"}),e.jsx("p",{className:"text-gray-600",children:"Access your equity dashboard and documents"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:b,onChange:r=>h(r.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{id:"password",type:"password",value:g,onChange:r=>x(r.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",autoComplete:"new-password",required:!0})]})]}),f&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(C,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-700",children:f})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium",children:o?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Signing in..."})]}):"Sign In"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center mb-3",children:"Quick Login Shortcuts"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("button",{type:"button",onClick:v,disabled:o,className:"w-full border border-blue-200 hover:border-blue-300 text-blue-700 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 font-medium py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign In as Employee (test9@test.com)"}),e.jsx("button",{type:"button",onClick:()=>i("admin@derayah.com","Admin123!"),disabled:o,className:"w-full border border-green-200 hover:border-green-300 text-green-700 hover:text-green-800 bg-green-50 hover:bg-green-100 font-medium py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign In as Company Admin (admin@derayah.com)"}),e.jsx("button",{type:"button",onClick:()=>i("hr@derayah.com","Na101918!@"),disabled:o,className:"w-full border border-amber-200 hover:border-amber-300 text-amber-700 hover:text-amber-800 bg-amber-50 hover:bg-amber-100 font-medium py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign In as HR Admin (hr@derayah.com)"}),e.jsx("button",{type:"button",onClick:()=>i("superadmin@derayah.com","Superadmin123!"),disabled:o,className:"w-full border border-purple-200 hover:border-purple-300 text-purple-700 hover:text-purple-800 bg-purple-50 hover:bg-purple-100 font-medium py-2 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign In as Super Admin (superadmin@derayah.com)"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(I,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Login Instructions:"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsx("li",{children:"• Use your company email address"}),e.jsx("li",{children:"• Default password: Employee123!"}),e.jsx("li",{children:"• Contact HR if you need assistance"})]})]})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Need help? Contact your HR department"})})]})})}export{Q as default};
