import{a as ce,u as de,s as n,j as e}from"./index-CHcuUdej.js";import{r as c}from"./react-vendor-xiFAdxLt.js";import{f as H}from"./dateUtils-DoPl8O0G.js";import{x as J,F as D,a2 as me,N as ue,s as M,a3 as xe,H as pe,K as V,l as ge}from"./ui-vendor-a8g5-7pO.js";import"./supabase-vendor-B-LuImWU.js";function je(){const{t:o,i18n:K}=ce(),h=K.language==="ar",[x,U]=c.useState("documents"),[N,Q]=c.useState([]),[w,$]=c.useState([]),[z,W]=c.useState([]),[X,Z]=c.useState(!0),[ee,S]=c.useState(!1),[te,A]=c.useState(!1),[se,f]=c.useState(!1),[d,P]=c.useState(null),[T,ae]=c.useState([]),[R,re]=c.useState([]);c.useState(null);const[C,L]=c.useState(null),[E,b]=c.useState(null),{userRole:u,hasPermission:q}=de(),g=c.useMemo(()=>{if(!u)return console.log("âŒ canApproveDocuments: userRole is null"),!1;if(console.log("ðŸ” Debug canApproveDocuments:",{userRole:u,user_type:u.user_type,role:u.role,hasPermission:q("contract_approval"),fullUserRole:JSON.stringify(u,null,2)}),u.user_type==="super_admin")return console.log("âœ… canApproveDocuments: user_type is super_admin"),!0;if(u.role==="super_admin")return console.log("âœ… canApproveDocuments: role is super_admin"),!0;if(u.role==="finance_admin")return console.log("âœ… canApproveDocuments: role is finance_admin"),!0;if(u.role==="hr_admin"||u.role==="legal_admin"||u.role==="company_admin"){const t=q("contract_approval");return console.log("ðŸ” canApproveDocuments: hr/legal/company admin, hasPermission:",t),t}return console.log("âŒ canApproveDocuments: No matching conditions"),!1},[u,q]),[p,k]=c.useState({template_name:"",document_type:"grant_agreement",template_content:"",merge_fields:{fields:[]},is_active:!0,language:"en"}),[l,_]=c.useState({template_id:"",employee_id:"",grant_id:"",document_name:""});c.useEffect(()=>{y(),ne()},[x]);const ne=async()=>{try{const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:s}=await n.from("company_users").select("company_id").eq("user_id",t.id).maybeSingle();if(!s)return;const[a,i]=await Promise.all([n.from("employees").select("id, first_name_en, last_name_en, email, employee_number").eq("company_id",s.company_id),n.from("grants").select("id, grant_number, employee_id").eq("company_id",s.company_id).eq("status","active")]);a.data&&ae(a.data),i.data&&re(i.data)}catch(t){console.error("Error loading employees and grants:",t)}},y=async()=>{try{const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:s}=await n.from("company_users").select("company_id").eq("user_id",t.id).single();if(!s)return;if(x==="templates"){const{data:a}=await n.from("document_templates").select("*").eq("company_id",s.company_id).order("created_at",{ascending:!1});a&&Q(a)}else if(x==="documents"){const{data:a}=await n.from("generated_documents").select("*, employees(first_name_en, last_name_en, email), grants(status, employee_acceptance_at)").eq("company_id",s.company_id).order("generated_at",{ascending:!1});if(a){const i=a.map(m=>{const r=m.grants;let j=m.status;return r!=null&&r.employee_acceptance_at&&(j="signed"),{...m,status:j}});$(i)}}else if(x==="signatures"){const{data:a}=await n.from("e_signatures").select("*").order("created_at",{ascending:!1});a&&W(a)}}catch(t){console.error("Error loading data:",t)}finally{Z(!1)}},le=async()=>{try{const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:s}=await n.from("company_users").select("company_id").eq("user_id",t.id).single();if(!s)return;const{error:a}=await n.from("document_templates").insert({company_id:s.company_id,...p,created_by:t.id});if(a)throw a;S(!1),O(),y()}catch(t){console.error("Error creating template:",t),alert("Failed to create template")}},ie=async()=>{try{const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:s}=await n.from("company_users").select("company_id").eq("user_id",t.id).maybeSingle();if(!s)return;const a=N.find(v=>v.id===l.template_id);if(!a)return;const i=T.find(v=>v.id===l.employee_id),m=R.find(v=>v.id===l.grant_id);let r=a.template_content;i&&(r=r.replace(/{{employee_first_name}}/g,i.first_name_en||""),r=r.replace(/{{employee_last_name}}/g,i.last_name_en||""),r=r.replace(/{{employee_email}}/g,i.email||""),r=r.replace(/{{employee_number}}/g,i.employee_number||"")),m&&(r=r.replace(/{{grant_number}}/g,m.grant_number||""));const{error:j}=await n.from("generated_documents").insert({company_id:s.company_id,template_id:l.template_id,employee_id:l.employee_id||null,grant_id:l.grant_id||null,document_name:l.document_name,document_content:r,document_type:"grant_agreement",status:"draft"});if(j)throw j;A(!1),B(),U("documents"),y(),alert("Document generated successfully!")}catch(t){console.error("Error generating document:",t),alert("Failed to generate document")}},oe=async t=>{if(confirm("Delete this template?"))try{const{error:s}=await n.from("document_templates").delete().eq("id",t);if(s)throw s;y()}catch(s){console.error("Error deleting template:",s),alert("Failed to delete template")}},Y=async t=>{try{const s=w.find(r=>r.id===t);if(!s||!s.employee_id){alert("No employee associated with this document");return}const a=T.find(r=>r.id===s.employee_id);if(!a){alert("Employee not found");return}const{error:i}=await n.from("generated_documents").update({status:"pending_signature"}).eq("id",t);if(i)throw i;const{error:m}=await n.from("e_signatures").insert({document_id:t,signer_email:a.email,signer_name:`${a.first_name_en} ${a.last_name_en}`,status:"pending"});if(m)throw m;alert(`Signature request sent to ${a.email}`),y()}catch(s){console.error("Error requesting signature:",s),alert("Failed to send signature request")}},F=async t=>{if(!C)try{L(t);const{data:{user:s}}=await n.auth.getUser();if(!s){alert("Unable to approve the document because no active session was found.");return}const a=new Date().toISOString(),{error:i}=await n.from("generated_documents").update({status:"pending_signature",approved_by:s.id,approved_at:a}).eq("id",t);if(i)throw i;$(m=>m.map(r=>r.id===t?{...r,status:"pending_signature"}:r)),(d==null?void 0:d.id)===t&&P({...d,status:"pending_signature"}),y(),alert("Document approved successfully. You can now send it for signature.")}catch(s){console.error("Error approving document:",s),alert("Failed to approve the document. Please try again.")}finally{L(null)}},I=t=>{P(t),f(!0)},O=()=>{k({template_name:"",document_type:"grant_agreement",template_content:"",merge_fields:{fields:[]},is_active:!0,language:"en"})},B=()=>{_({template_id:"",employee_id:"",grant_id:"",document_name:""})},G=t=>{const s={draft:"bg-gray-100 text-gray-800",pending_signature:"bg-yellow-100 text-yellow-800",signed:"bg-green-100 text-green-800",archived:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",declined:"bg-red-100 text-red-800"},a={pending_signature:"Pending Signature",draft:"Draft",signed:"Signed",archived:"Archived",pending:"Pending",declined:"Declined"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s[t]||s.draft}`,children:a[t]||t})};return X?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading..."})}):e.jsxs("div",{className:`space-y-6 ${h?"text-right":"text-left"}`,dir:h?"rtl":"ltr",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:h?"text-right":"",children:[e.jsxs("h1",{className:`text-2xl font-bold text-gray-900 flex items-center gap-3 ${h?"flex-row-reverse justify-end":""}`,children:[o("documents.title"),e.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white text-lg font-semibold",children:w.length})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage templates, generate documents, and track e-signatures"})]}),e.jsxs("div",{className:`flex items-center space-x-3 ${h?"space-x-reverse flex-row-reverse":""}`,children:[x==="templates"&&e.jsxs("button",{onClick:()=>S(!0),className:`flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition ${h?"space-x-reverse":""}`,children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o("documents.newTemplate")})]}),x==="documents"&&e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:o("documents.generateDocument")})]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["documents","templates","signatures"].map(t=>e.jsx("button",{onClick:()=>U(t),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${x===t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t},t))})}),x==="templates"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.map(t=>{var s,a;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:border-blue-300 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.template_name}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:t.document_type.replace("_"," ")})]})]}),e.jsx("button",{onClick:()=>oe(t.id),className:"text-gray-400 hover:text-red-600 transition",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[((a=(s=t.merge_fields)==null?void 0:s.fields)==null?void 0:a.length)||0," merge fields"]}),t.is_active&&e.jsxs("span",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:o("documents.active")})]})]})]},t.id)}),N.length===0&&e.jsxs("div",{className:"col-span-3 bg-gray-50 rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx(D,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o("documents.noTemplatesYet")}),e.jsx("p",{className:"text-gray-600 mb-6",children:o("documents.createFirstTemplate")}),e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o("documents.createTemplate")})]})]})]}),x==="documents"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:o("documents.document")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:o("documents.employee")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:o("documents.type")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:o("documents.status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:o("documents.generatedAt")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:o("documents.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(t=>{var a,i;const s=((i=(a=t.status)==null?void 0:a.toLowerCase)==null?void 0:i.call(a))||t.status;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"w-5 h-5 text-gray-400"}),e.jsx("button",{onClick:()=>I(t),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline transition text-left",children:t.document_name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.employees?`${t.employees.first_name_en} ${t.employees.last_name_en}`:"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:t.document_type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4",children:G(t.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:H(t.generated_at)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[(()=>{const m=g&&s==="draft";return s==="draft"&&console.log("ðŸ” Button render check for draft document:",{documentId:t.id,documentName:t.document_name,canApproveDocuments:g,normalizedStatus:s,docStatus:t.status,shouldShow:m}),null})(),g&&s==="draft"&&e.jsx("button",{onClick:()=>F(t.id),className:"p-1 text-gray-400 hover:text-green-600 transition disabled:opacity-50",title:"Approve for Signature",disabled:C===t.id,children:e.jsx(M,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative inline-block text-left",children:[e.jsx("button",{onClick:()=>b(E===t.id?null:t.id),className:"p-1 text-gray-400 hover:text-gray-600 transition",title:"More actions",children:e.jsx(xe,{className:"w-4 h-4"})}),E===t.id&&e.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{I(t),b(null)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>{Y(t.id),b(null)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",disabled:s!=="draft",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Send for Signature"]}),e.jsxs("button",{onClick:()=>{alert("Email sharing functionality is coming soon!"),b(null)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Share by Email"]}),(()=>{const m=g&&s==="draft";return s==="draft"&&E===t.id&&console.log("ðŸ” Actions menu - Approve button check:",{documentId:t.id,canApproveDocuments:g,normalizedStatus:s,shouldShowInMenu:m}),null})(),g&&s==="draft"&&e.jsxs("button",{onClick:()=>{F(t.id),b(null)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",disabled:C===t.id,children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Approve"]})]})})]})]})})]},t.id)})})]}),w.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(D,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:o("documents.noDocumentsGeneratedYet")})]})]}),x==="signatures"&&e.jsxs("div",{className:"space-y-4",children:[z.map(t=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.signer_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.signer_email})]}),e.jsxs("div",{className:"text-right",children:[G(t.status),t.signed_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Signed: ",H(t.signed_at)]})]})]})},t.id)),z.length===0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:o("documents.noSignatureRequestsYet")})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o("documents.createDocumentTemplate")})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("documents.templateName")}),e.jsx("input",{type:"text",value:p.template_name,onChange:t=>k({...p,template_name:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Standard Grant Agreement"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o("documents.templateType")}),e.jsxs("select",{value:p.document_type,onChange:t=>k({...p,document_type:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"grant_agreement",children:"Grant Agreement"}),e.jsx("option",{value:"exercise_notice",children:"Exercise Notice"}),e.jsx("option",{value:"amendment",children:"Amendment"}),e.jsx("option",{value:"termination",children:"Termination"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Template"}),e.jsx("textarea",{value:p.template_content,onChange:t=>k({...p,template_content:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:8,placeholder:"Use {{field_name}} for merge fields"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{S(!1),O()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),e.jsx("button",{onClick:le,disabled:!p.template_name||!p.template_content,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:"Create Template"})]})]})}),te&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Generate Document"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),e.jsxs("select",{value:l.template_id,onChange:t=>_({...l,template_id:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose a template..."}),N.map(t=>e.jsx("option",{value:t.id,children:t.template_name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employee"}),e.jsxs("select",{value:l.employee_id,onChange:t=>_({...l,employee_id:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Choose an employee..."}),T.map(t=>e.jsxs("option",{value:t.id,children:[t.first_name_en," ",t.last_name_en," (",t.employee_number,")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Grant"}),e.jsxs("select",{value:l.grant_id,onChange:t=>_({...l,grant_id:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:!l.employee_id,children:[e.jsx("option",{value:"",children:"Choose a grant..."}),R.filter(t=>t.employee_id===l.employee_id).map(t=>e.jsx("option",{value:t.id,children:t.grant_number},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Name"}),e.jsx("input",{type:"text",value:l.document_name,onChange:t=>_({...l,document_name:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Grant Agreement - John Doe"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{A(!1),B()},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),e.jsx("button",{onClick:ie,disabled:!l.template_id||!l.document_name,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:"Generate"})]})]})}),se&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d.document_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.employees&&e.jsxs("span",{children:["For: ",d.employees.first_name_en," ",d.employees.last_name_en]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[G(d.status),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"text-2xl",children:"Ã—"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed text-gray-800",children:d.document_content})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end space-x-3 bg-gray-50",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Close"}),d.status==="draft"&&g&&e.jsx("button",{onClick:()=>{F(d.id),f(!1)},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",disabled:C===d.id,children:"Approve for Signature"}),d.status==="draft"&&e.jsx("button",{onClick:()=>{Y(d.id),f(!1)},className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:"Send for Signature"})]})]})})]})}export{je as default};
