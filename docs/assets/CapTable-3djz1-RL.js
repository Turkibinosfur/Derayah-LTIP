import{s as g,j as e}from"./index-DDk1oefv.js";import{r as i}from"./react-vendor-xiFAdxLt.js";import{f as ee}from"./dateUtils-DoPl8O0G.js";import{m as Fe,c as se,j as Ee,w as qe,U as De,P as Ie,D as Le,W as re,Y as $e,z as Te,E as te,H as Oe,K as Ve,p as Be}from"./ui-vendor-B0ZOy8uN.js";import"./supabase-vendor-B-LuImWU.js";function Ke(){const[p,U]=i.useState([]),[$,ae]=i.useState([]),[H,le]=i.useState([]),[ne,oe]=i.useState(!0),[f,ie]=i.useState(null),[M,G]=i.useState("table"),[de,T]=i.useState(!1),[ce,F]=i.useState(!1),[xe,O]=i.useState(!1),[ue,E]=i.useState(!1),[me,q]=i.useState(!1),[he,D]=i.useState(!1),[x,I]=i.useState(null),[A,V]=i.useState(null),[L,b]=i.useState(null),[B,R]=i.useState(null),[c,y]=i.useState({name:"",shareholder_type:"founder",shares_owned:0,share_class:"Common",investment_amount:0,liquidation_preference:0,preference_multiple:1}),[d,j]=i.useState({name:"",shareholder_type:"founder",shares_owned:0,share_class:"Common",investment_amount:0,liquidation_preference:0,preference_multiple:1}),[n,w]=i.useState({scenario_name:"",new_investment:0,new_shares:0,valuation:0,share_class:"Preferred"}),[l,_]=i.useState({round_name:"",round_type:"seed",amount_to_raise:0,pre_money_valuation:0,option_pool_increase:0}),[N,K]=i.useState({exit_value:1e8,scenario_type:"acquisition"}),[P,Y]=i.useState([]);i.useEffect(()=>{S()},[]),i.useEffect(()=>{const s=r=>{L&&!r.target.closest(".dropdown-container")&&b(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[L]);const S=async()=>{try{const{data:{user:s}}=await g.auth.getUser();if(!s)return;const{data:r}=await g.from("company_users").select("company_id").eq("user_id",s.id).maybeSingle();if(!r)return;const t=r.company_id;ie(t);const[o,a,u]=await Promise.all([g.from("shareholders").select("*").eq("company_id",t).eq("is_active",!0).order("ownership_percentage",{ascending:!1}),g.from("funding_rounds").select("*").eq("company_id",t).order("closing_date",{ascending:!1}),g.from("dilution_scenarios").select("*").eq("company_id",t).order("created_at",{ascending:!1}).limit(5)]);o.data&&U(o.data),a.data&&ae(a.data),u.data&&le(u.data)}catch(s){console.error("Error loading cap table:",s)}finally{oe(!1)}},h=p.reduce((s,r)=>s+Number(r.shares_owned),0),pe=p.reduce((s,r)=>s+Number(r.investment_amount||0),0),C=(s,r)=>r>0?(s/r*100).toFixed(2):"0.00",ge=s=>{I(s),q(!0),b(null)},be=s=>{I(s),j({name:s.name,shareholder_type:s.shareholder_type,shares_owned:Number(s.shares_owned),share_class:s.share_class,investment_amount:Number(s.investment_amount||0),liquidation_preference:Number(s.liquidation_preference||0),preference_multiple:Number(s.preference_multiple||1)}),D(!0),b(null)},fe=async s=>{if(window.confirm(`Are you sure you want to delete ${s.name}?`))try{const{error:r}=await g.from("shareholders").delete().eq("id",s.id);if(r){console.error("Error deleting shareholder:",r),alert("Failed to delete shareholder");return}await S(),await z(),b(null)}catch(r){console.error("Error deleting shareholder:",r),alert("Failed to delete shareholder")}},ye=async()=>{if(!x||!d.name||d.shares_owned<=0){alert("Please fill in all required fields (Name and Shares must be greater than 0)");return}try{const{error:s}=await g.from("shareholders").update({name:d.name,shareholder_type:d.shareholder_type,shares_owned:d.shares_owned,share_class:d.share_class,investment_amount:d.investment_amount,liquidation_preference:d.liquidation_preference,preference_multiple:d.preference_multiple,updated_at:new Date().toISOString()}).eq("id",x.id);if(s){console.error("Error updating shareholder:",s),alert(`Failed to update shareholder: ${s.message}`);return}await S(),await z(),D(!1),I(null)}catch(s){console.error("Error updating shareholder:",s),alert("Failed to update shareholder")}},je=async()=>{if(!f||!c.name||c.shares_owned<=0){alert("Please fill in all required fields (Name and Shares must be greater than 0)");return}try{const s=h+c.shares_owned,r=C(c.shares_owned,s),{error:t}=await g.from("shareholders").insert({company_id:f,...c,ownership_percentage:parseFloat(r)});if(t){console.error("Database error:",t),alert(`Failed to add shareholder: ${t.message}`);return}T(!1),Z(),await S(),await z()}catch(s){console.error("Error adding shareholder:",s),alert("An unexpected error occurred. Please try again.")}},z=async()=>{if(f)try{const{data:s,error:r}=await g.from("shareholders").select("*").eq("company_id",f).eq("is_active",!0);if(r||!s)return;const t=s.reduce((o,a)=>o+Number(a.shares_owned),0);for(const o of s){const a=C(Number(o.shares_owned),t);await g.from("shareholders").update({ownership_percentage:parseFloat(a)}).eq("id",o.id)}}catch(s){console.error("Error recalculating ownership:",s)}},ve=async()=>{if(!(!f||!n.scenario_name))try{const s=h+n.new_shares,r=p.map(o=>({name:o.name,current_shares:o.shares_owned,current_ownership:o.ownership_percentage,new_ownership:C(Number(o.shares_owned),s),dilution:(o.ownership_percentage-parseFloat(C(Number(o.shares_owned),s))).toFixed(2)}));r.push({name:"New Investor",current_shares:0,current_ownership:0,new_ownership:C(n.new_shares,s),dilution:"0.00"});const{error:t}=await g.from("dilution_scenarios").insert({company_id:f,scenario_name:n.scenario_name,scenario_description:`Investment: SAR ${n.new_investment.toLocaleString()}, New shares: ${n.new_shares.toLocaleString()}, Valuation: SAR ${n.valuation.toLocaleString()}`,scenario_config:n,results:{shareholders:r,new_total_shares:s}});t||(F(!1),J(),S())}catch(s){console.error("Error creating scenario:",s)}},Ne=async()=>{if(!(!f||!l.round_name))try{const s=l.pre_money_valuation+l.amount_to_raise,r=l.pre_money_valuation/h,t=l.amount_to_raise/r,o=l.option_pool_increase/100*(h+t),{error:a}=await g.from("funding_rounds").insert({company_id:f,round_name:l.round_name,round_type:l.round_type,amount_raised:l.amount_to_raise,valuation_pre_money:l.pre_money_valuation,valuation_post_money:s,share_price:r,shares_issued:t,closing_date:new Date().toISOString().split("T")[0],notes:`Option pool increase: ${l.option_pool_increase}%`});a||(O(!1),Q(),S())}catch(s){console.error("Error creating round:",s)}},we=()=>{const s=N.exit_value,r=[];let t=s;const o=[...p].sort((a,u)=>{const m=a.share_class.toLowerCase().includes("preferred"),v=u.share_class.toLowerCase().includes("preferred");return m&&!v?-1:!m&&v?1:0});for(const a of o){const u=a.share_class.toLowerCase().includes("preferred");let m=0;if(u&&a.liquidation_preference){const v=a.liquidation_preference*(a.preference_multiple||1);m=Math.min(v,t),t-=m}r.push({shareholder:a.name,shares:a.shares_owned,ownership:a.ownership_percentage,payout:m,multiple:a.investment_amount>0?m/a.investment_amount:0})}t>0&&r.forEach(a=>{const u=p.find(m=>m.name===a.shareholder);if(u){const m=t*(u.ownership_percentage/100);a.payout+=m,a.multiple=u.investment_amount>0?a.payout/u.investment_amount:0}}),Y(r),E(!0)},Z=()=>{y({name:"",shareholder_type:"founder",shares_owned:0,share_class:"Common",investment_amount:0,liquidation_preference:0,preference_multiple:1})},J=()=>{w({scenario_name:"",new_investment:0,new_shares:0,valuation:0,share_class:"Preferred"})},Q=()=>{_({round_name:"",round_type:"seed",amount_to_raise:0,pre_money_valuation:0,option_pool_increase:0})},_e=s=>{V(s)},Se=(s,r)=>{if(s.preventDefault(),A===null||A===r)return;const t=[...p],o=t[A];t.splice(A,1),t.splice(r,0,o),U(t),V(r)},Ce=()=>{V(null)},X=s=>{const r={founder:"bg-blue-100 text-blue-800",investor:"bg-green-100 text-green-800",employee:"bg-purple-100 text-purple-800",institution:"bg-gray-100 text-gray-800"};return r[s]||r.other},W=s=>{const r=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"];return r[s%r.length]};return ne?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:["Cap Table Management",e.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white text-lg font-semibold",children:p.length})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive equity structure analysis and scenario modeling"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Waterfall Analysis"]}),e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(se,{className:"w-5 h-5"}),"Model Round"]}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Dilution Model"]}),e.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(qe,{className:"w-5 h-5"}),"Add Shareholder"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:e.jsx(De,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Shareholders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Shares"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:e.jsx(Le,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Investment"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["SAR ",(pe/1e6).toFixed(1),"M"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-orange-100",children:e.jsx(se,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Funding Rounds"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>G("table"),className:`px-4 py-2 rounded-lg font-medium transition ${M==="table"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:"Table View"}),e.jsx("button",{onClick:()=>G("visualization"),className:`px-4 py-2 rounded-lg font-medium transition ${M==="visualization"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:"Visualization"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 rounded-lg",children:[e.jsx(re,{className:"w-4 h-4"}),"Export"]})]})}),e.jsxs("div",{className:"p-6",children:[M==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase w-8"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shareholder"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Share Class"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ownership %"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((s,r)=>e.jsxs("tr",{draggable:!0,onDragStart:()=>_e(r),onDragOver:t=>Se(t,r),onDragEnd:Ce,className:`hover:bg-gray-50 cursor-move ${A===r?"opacity-50":""}`,children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx($e,{className:"w-4 h-4 text-gray-400"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W(r)}}),e.jsx("button",{onClick:()=>{I(s),q(!0)},className:"font-medium text-blue-600 hover:text-blue-800 hover:underline transition text-left",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${X(s.shareholder_type)}`,children:s.shareholder_type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:s.share_class}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:Number(s.shares_owned).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${Math.min(s.ownership_percentage,100)}%`,backgroundColor:W(r)}})}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 w-16 text-right",children:[Number(s.ownership_percentage).toFixed(2),"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-600",children:["SAR ",Number(s.investment_amount||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"relative dropdown-container",children:[e.jsx("button",{onClick:t=>{t.stopPropagation();const a=t.currentTarget.getBoundingClientRect(),u=120,m=window.innerHeight-a.bottom,v=a.top;let k;m>=u+10?k=a.bottom+8:v>=u+10?k=a.top-u+5:k=window.innerHeight-u-10,R({top:k,left:a.right-150}),b(L===s.id?null:s.id)},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-4 h-4 text-gray-400"})}),L===s.id&&B&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{b(null),R(null)}}),e.jsx("div",{className:"fixed w-48 bg-white rounded-md shadow-lg z-50 border border-gray-200",style:{top:`${B.top}px`,left:`${B.left}px`},children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{ge(s),b(null),R(null)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(te,{className:"w-4 h-4"}),"View Details"]}),e.jsxs("button",{onClick:()=>{be(s),b(null),R(null)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>{fe(s),b(null),R(null)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Delete"]})]})})]})]})})]},s.id))})]})}),M==="visualization"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Ownership Distribution"}),e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full max-w-md mx-auto",children:[p.map((s,r)=>{const t=p.slice(0,r).reduce((Pe,Me)=>Pe+Me.ownership_percentage/100*360,0),o=s.ownership_percentage/100*360,a=t+o,u=(t-90)*(Math.PI/180),m=(a-90)*(Math.PI/180),v=100+90*Math.cos(u),k=100+90*Math.sin(u),ke=100+90*Math.cos(m),Ae=100+90*Math.sin(m),Re=o>180?1:0;return e.jsx("path",{d:`M 100 100 L ${v} ${k} A 90 90 0 ${Re} 1 ${ke} ${Ae} Z`,fill:W(r),stroke:"white",strokeWidth:"2"},s.id)}),e.jsx("circle",{cx:"100",cy:"100",r:"50",fill:"white"}),e.jsx("text",{x:"100",y:"95",textAnchor:"middle",className:"text-xl font-bold",fill:"#111827",children:p.length}),e.jsx("text",{x:"100",y:"110",textAnchor:"middle",className:"text-xs",fill:"#6B7280",children:"Shareholders"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Breakdown by Type"}),e.jsx("div",{className:"space-y-4",children:["founder","investor","employee","institution"].map(s=>{const r=p.filter(t=>t.shareholder_type===s).reduce((t,o)=>t+o.ownership_percentage,0);return r===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:s.replace("_"," ")}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[r.toFixed(2),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${s==="founder"?"bg-blue-500":s==="investor"?"bg-green-500":s==="employee"?"bg-purple-500":"bg-gray-500"}`,style:{width:`${r}%`}})})]},s)})}),e.jsx("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Fully Diluted Shares"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Total: ",h.toLocaleString()," shares"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Includes all issued and outstanding shares, options, and convertible securities"})]})]})})]})]})]})]}),H.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Dilution Scenarios"}),e.jsx("button",{onClick:()=>F(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All"})]}),e.jsx("div",{className:"p-6 space-y-3",children:H.map(s=>e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.scenario_name}),e.jsx(te,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.scenario_description})]}),e.jsx("p",{className:"text-xs text-gray-500",children:ee(s.created_at)})]})},s.id))})]}),$.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Funding History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Round"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount Raised"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pre-Money"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Post-Money"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Price/Share"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:$.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:s.round_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:s.round_type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right font-semibold text-gray-900",children:["SAR ",(Number(s.amount_raised)/1e6).toFixed(1),"M"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-600",children:["SAR ",(Number(s.valuation_pre_money||0)/1e6).toFixed(1),"M"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-600",children:["SAR ",(Number(s.valuation_post_money)/1e6).toFixed(1),"M"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-600",children:["SAR ",Number(s.share_price||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ee(s.closing_date)})]},s.id))})]})})]}),de&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Add Shareholder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:s=>y({...c,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:c.shareholder_type,onChange:s=>y({...c,shareholder_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"founder",children:"Founder"}),e.jsx("option",{value:"investor",children:"Investor"}),e.jsx("option",{value:"employee",children:"Employee Pool"}),e.jsx("option",{value:"institution",children:"Institution"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shares"}),e.jsx("input",{type:"number",value:c.shares_owned,onChange:s=>y({...c,shares_owned:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Share Class"}),e.jsxs("select",{value:c.share_class,onChange:s=>y({...c,share_class:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Preferred",children:"Preferred"}),e.jsx("option",{value:"Series A",children:"Series A"}),e.jsx("option",{value:"Series B",children:"Series B"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Amount (SAR)"}),e.jsx("input",{type:"number",value:c.investment_amount,onChange:s=>y({...c,investment_amount:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.share_class!=="Common"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Liquidation Pref"}),e.jsx("input",{type:"number",value:c.liquidation_preference,onChange:s=>y({...c,liquidation_preference:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preference Multiple"}),e.jsx("input",{type:"number",step:"0.1",value:c.preference_multiple,onChange:s=>y({...c,preference_multiple:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{T(!1),Z()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:je,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Shareholder"})]})]})}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dilution Scenario Model"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scenario Name"}),e.jsx("input",{type:"text",value:n.scenario_name,onChange:s=>w({...n,scenario_name:s.target.value}),placeholder:"e.g., Series A Round",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Investment (SAR)"}),e.jsx("input",{type:"number",value:n.new_investment,onChange:s=>w({...n,new_investment:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Shares to Issue"}),e.jsx("input",{type:"number",value:n.new_shares,onChange:s=>w({...n,new_shares:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Post-Money Valuation (SAR)"}),e.jsx("input",{type:"number",value:n.valuation,onChange:s=>w({...n,valuation:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Share Class"}),e.jsxs("select",{value:n.share_class,onChange:s=>w({...n,share_class:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Preferred",children:"Preferred"}),e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Series A",children:"Series A"}),e.jsx("option",{value:"Series B",children:"Series B"})]})]})]}),n.new_shares>0&&h>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Impact Preview"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"New Total Shares:"}),e.jsx("span",{className:"font-semibold text-blue-900",children:(h+n.new_shares).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"New Investor Ownership:"}),e.jsxs("span",{className:"font-semibold text-blue-900",children:[C(n.new_shares,h+n.new_shares),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Price per Share:"}),e.jsxs("span",{className:"font-semibold text-blue-900",children:["SAR ",n.new_shares>0?(n.new_investment/n.new_shares).toFixed(2):"0.00"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{F(!1),J()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Run Scenario"})]})]})}),xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Model Funding Round"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Round Name"}),e.jsx("input",{type:"text",value:l.round_name,onChange:s=>_({...l,round_name:s.target.value}),placeholder:"e.g., Series A",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Round Type"}),e.jsxs("select",{value:l.round_type,onChange:s=>_({...l,round_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"seed",children:"Seed"}),e.jsx("option",{value:"series_a",children:"Series A"}),e.jsx("option",{value:"series_b",children:"Series B"}),e.jsx("option",{value:"series_c",children:"Series C"}),e.jsx("option",{value:"series_d",children:"Series D"}),e.jsx("option",{value:"ipo",children:"IPO"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount to Raise (SAR)"}),e.jsx("input",{type:"number",value:l.amount_to_raise,onChange:s=>_({...l,amount_to_raise:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pre-Money Valuation (SAR)"}),e.jsx("input",{type:"number",value:l.pre_money_valuation,onChange:s=>_({...l,pre_money_valuation:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Option Pool Increase (%)"}),e.jsx("input",{type:"number",step:"0.1",value:l.option_pool_increase,onChange:s=>_({...l,option_pool_increase:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.amount_to_raise>0&&l.pre_money_valuation>0&&e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"font-medium text-orange-900 mb-2",children:"Round Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"Post-Money Valuation:"}),e.jsxs("span",{className:"font-semibold text-orange-900",children:["SAR ",((l.pre_money_valuation+l.amount_to_raise)/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"Price per Share:"}),e.jsxs("span",{className:"font-semibold text-orange-900",children:["SAR ",h>0?(l.pre_money_valuation/h).toFixed(2):"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"New Shares Issued:"}),e.jsx("span",{className:"font-semibold text-orange-900",children:h>0?Math.round(l.amount_to_raise/(l.pre_money_valuation/h)).toLocaleString():"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"Investor Ownership:"}),e.jsxs("span",{className:"font-semibold text-orange-900",children:[h>0?(l.amount_to_raise/(l.pre_money_valuation+l.amount_to_raise)*100).toFixed(2):"0.00","%"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{O(!1),Q()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Ne,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Model Round"})]})]})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Waterfall Analysis"}),P.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exit Value (SAR)"}),e.jsx("input",{type:"number",value:N.exit_value,onChange:s=>K({...N,exit_value:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exit Scenario"}),e.jsxs("select",{value:N.scenario_type,onChange:s=>K({...N,scenario_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"acquisition",children:"Acquisition"}),e.jsx("option",{value:"ipo",children:"IPO"}),e.jsx("option",{value:"liquidation",children:"Liquidation"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:we,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Run Analysis"})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-purple-900",children:["Exit Scenario: ",N.scenario_type]}),e.jsxs("p",{className:"text-sm text-purple-700 mt-1",children:["Total Exit Value: SAR ",(N.exit_value/1e6).toFixed(1),"M"]})]}),e.jsx("button",{onClick:()=>Y([]),className:"px-3 py-1.5 text-sm text-purple-600 hover:bg-purple-100 rounded-lg",children:"New Analysis"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shareholder"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Shares"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ownership %"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Payout"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Multiple"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:s.shareholder}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s.shares.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[s.ownership.toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-900",children:["SAR ",(s.payout/1e6).toFixed(2),"M"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-semibold ${s.multiple>=2?"text-green-600":s.multiple>=1?"text-blue-600":"text-red-600"}`,children:[s.multiple.toFixed(2),"x"]})})]},r))}),e.jsx("tfoot",{className:"bg-gray-50 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-900",children:"Total"}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-900",children:P.reduce((s,r)=>s+r.shares,0).toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-900",children:[P.reduce((s,r)=>s+r.ownership,0).toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-900",children:["SAR ",(P.reduce((s,r)=>s+r.payout,0)/1e6).toFixed(2),"M"]}),e.jsx("td",{className:"px-4 py-3"})]})})]})}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"}),e.jsxs("button",{className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(re,{className:"w-4 h-4 inline mr-2"}),"Export Analysis"]})]})]})]})}),me&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Shareholder Details"}),e.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:x.name}),e.jsx("span",{className:`inline-block px-3 py-1 text-sm rounded-full mt-2 ${X(x.shareholder_type)}`,children:x.shareholder_type.replace("_"," ")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Share Class"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:x.share_class})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Shares Owned"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Number(x.shares_owned).toLocaleString()})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Ownership Percentage"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[x.ownership_percentage.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Investment Amount"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[x.investment_amount.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Status"}),e.jsx("p",{className:`text-lg font-semibold ${x.is_active?"text-green-600":"text-red-600"}`,children:x.is_active?"Active":"Inactive"})]})]}),(x.liquidation_preference||x.preference_multiple)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Liquidation Rights"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[x.liquidation_preference&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Liquidation Preference"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[x.liquidation_preference.toLocaleString()," SAR"]})]}),x.preference_multiple&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Preference Multiple"}),e.jsxs("p",{className:"font-bold text-gray-900",children:[x.preference_multiple,"x"]})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsx("button",{onClick:()=>q(!1),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Close"})})]})}),he&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Shareholder"}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:s=>j({...d,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter shareholder name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsxs("select",{value:d.shareholder_type,onChange:s=>j({...d,shareholder_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"founder",children:"Founder"}),e.jsx("option",{value:"investor",children:"Investor"}),e.jsx("option",{value:"employee",children:"Employee"}),e.jsx("option",{value:"advisor",children:"Advisor"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shares Owned *"}),e.jsx("input",{type:"number",value:d.shares_owned,onChange:s=>j({...d,shares_owned:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter number of shares",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Share Class"}),e.jsxs("select",{value:d.share_class,onChange:s=>j({...d,share_class:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Preferred A",children:"Preferred A"}),e.jsx("option",{value:"Preferred B",children:"Preferred B"}),e.jsx("option",{value:"Preferred C",children:"Preferred C"}),e.jsx("option",{value:"Preferred D",children:"Preferred D"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investment Amount (SAR)"}),e.jsx("input",{type:"number",value:d.investment_amount,onChange:s=>j({...d,investment_amount:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter investment amount",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Liquidation Preference (SAR)"}),e.jsx("input",{type:"number",value:d.liquidation_preference,onChange:s=>j({...d,liquidation_preference:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter liquidation preference",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preference Multiple"}),e.jsx("input",{type:"number",value:d.preference_multiple,onChange:s=>j({...d,preference_multiple:Number(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter preference multiple",min:"1",step:"0.1"})]})]})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>D(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancel"}),e.jsx("button",{onClick:ye,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:"Update Shareholder"})]})]})})]})}export{Ke as default};
