import{j as e,s as j}from"./index-DDk1oefv.js";import{r as t}from"./react-vendor-xiFAdxLt.js";import{D as R,I as k,W as C,p as E}from"./ui-vendor-B0ZOy8uN.js";import"./supabase-vendor-B-LuImWU.js";function T({vestedShares:l,currentPrice:n}){const[i,b]=t.useState(0),[o,a]=t.useState(0),[r,x]=t.useState(0),[g,S]=t.useState(0),[m,v]=t.useState(0),c=85*595,A=.025,u=l*n,p=u+i+o+r+g,d=p-m,N=d>=c?d*A:0,h=d>=c,w=()=>{const s=`
ZAKAT CALCULATION REPORT
Generated: ${new Date().toLocaleString()}
Hijri Date: ${new Date().toLocaleDateString("ar-SA-u-ca-islamic")}

ASSETS BREAKDOWN
Vested Shares Value: ${u.toLocaleString()} SAR
  - Shares: ${l.toLocaleString()}
  - Price: ${n.toFixed(2)} SAR
Cash & Savings: ${o.toLocaleString()} SAR
Gold & Precious Metals: ${r.toLocaleString()} SAR
Other Investments: ${g.toLocaleString()} SAR
Other Assets: ${i.toLocaleString()} SAR
Total Assets: ${p.toLocaleString()} SAR

LIABILITIES
Total Liabilities: ${m.toLocaleString()} SAR

NET ZAKATABLE WEALTH
Net Assets: ${d.toLocaleString()} SAR
Nisab Threshold: ${c.toLocaleString()} SAR (85g of gold)

ZAKAT CALCULATION
Zakat Rate: 2.5%
Zakat Payable: ${h?"YES":"NO"}
Zakat Due: ${N.toLocaleString()} SAR

NOTES
- This calculation uses the gold standard for Nisab (85 grams at ~595 SAR/gram)
- Zakat is calculated on net assets held for one lunar year
- Please consult with a qualified Islamic scholar for specific rulings

بسم الله الرحمن الرحيم
"And establish prayer and give zakah and bow with those who bow [in worship and obedience]." - Quran 2:43
    `,L=new Blob([s],{type:"text/plain;charset=utf-8"}),y=URL.createObjectURL(L),f=document.createElement("a");f.href=y,f.download=`zakat-calculation-${new Date().toISOString().split("T")[0]}.txt`,f.click(),URL.revokeObjectURL(y)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx(R,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Zakat Calculator"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Calculate your Islamic wealth tax"})]})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Share Portfolio Value"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vested Shares"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Price"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[n.toFixed(2)," SAR"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Share Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[u.toLocaleString()," SAR"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cash & Savings - SAR"}),e.jsx("input",{type:"number",value:o||"",onChange:s=>a(Number(s.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter cash and savings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gold & Precious Metals - SAR"}),e.jsx("input",{type:"number",value:r||"",onChange:s=>x(Number(s.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter gold value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Investments - SAR"}),e.jsx("input",{type:"number",value:g||"",onChange:s=>S(Number(s.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter other investments"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Assets - SAR"}),e.jsx("input",{type:"number",value:i||"",onChange:s=>b(Number(s.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter other zakatable assets"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Liabilities (Debts) - SAR"}),e.jsx("input",{type:"number",value:m||"",onChange:s=>v(Number(s.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter debts and liabilities"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border-2 border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Zakat Calculation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-green-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Assets"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[p.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-green-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Less: Liabilities"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",m.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-green-200",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Net Zakatable Wealth"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[d.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-green-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Nisab Threshold"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[c.toLocaleString()," SAR"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Zakat Payable"}),e.jsx("span",{className:`font-bold ${h?"text-green-600":"text-gray-400"}`,children:h?"YES":"NO"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t-2 border-green-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-base font-bold text-gray-900",children:"Zakat Due (2.5%)"}),e.jsxs("span",{className:"text-3xl font-bold text-green-600",children:[N.toLocaleString()," SAR"]})]})}),!h&&e.jsx("div",{className:"mt-4 bg-blue-50 rounded-lg p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(k,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Your net zakatable wealth is below the Nisab threshold. Zakat is not obligatory at this time."})]})})]}),e.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Calculation"})]}),e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Important Notes"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"• Zakat is due on wealth held for one complete lunar year (Hawl)"}),e.jsxs("li",{children:["• The Nisab is based on 85 grams of gold (approximately ",c.toLocaleString()," SAR)"]}),e.jsx("li",{children:"• Only include assets that are zakatable according to Islamic law"}),e.jsx("li",{children:"• This calculator provides an estimate. Please consult a qualified Islamic scholar for specific rulings"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg p-4 text-white text-center",children:[e.jsx("p",{className:"text-sm font-arabic mb-1",children:"بسم الله الرحمن الرحيم"}),e.jsx("p",{className:"text-xs opacity-90",children:'"And establish prayer and give zakah..." - Quran 2:43'})]})]})]})}function D(){const[l,n]=t.useState(0),[i,b]=t.useState(!0);t.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:{user:a}}=await j.auth.getUser();if(!a)return;const{data:r}=await j.from("employees").select("id").eq("user_id",a.id).maybeSingle();if(!r)return;const{data:x}=await j.from("grants").select("vested_shares").eq("employee_id",r.id).eq("status","active").maybeSingle();x&&n(x.vested_shares)}catch(a){console.error("Error loading data:",a)}finally{b(!1)}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Zakat Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Calculate your Islamic wealth tax"})]}),e.jsx(T,{vestedShares:l,currentPrice:85.5})]})}export{D as default};
