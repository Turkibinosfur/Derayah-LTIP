import{j as e}from"./index-CHcuUdej.js";import{r as x}from"./react-vendor-xiFAdxLt.js";import{C as U,a4 as J,c as R,a5 as I,a6 as B,a as $}from"./ui-vendor-a8g5-7pO.js";function z({events:d,onEventClick:h}){const[i,y]=x.useState(new Date),[T,E]=x.useState([]),[m,M]=x.useState("decade"),j=["January","February","March","April","May","June","July","August","September","October","November","December"],A=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];x.useEffect(()=>{L()},[i,d]);const L=()=>{const s=i.getFullYear(),t=i.getMonth(),a=new Date(s,t,1),l=new Date(s,t+1,0),n=new Date(a);n.setDate(n.getDate()-n.getDay());const r=new Date(l);r.setDate(r.getDate()+(6-r.getDay()));const f=[],N=new Date;N.setHours(0,0,0,0);for(let u=new Date(n);u<=r;u.setDate(u.getDate()+1)){const w=d.filter(c=>new Date(c.vesting_date).toDateString()===u.toDateString());f.push({date:new Date(u),isCurrentMonth:u.getMonth()===t,isToday:u.toDateString()===N.toDateString(),events:w})}E(f)},Y=s=>{const t=new Date(i);s==="prev"?t.setMonth(t.getMonth()-1):t.setMonth(t.getMonth()+1),y(t)},k=s=>{const t=new Date(i);s==="prev"?t.setFullYear(t.getFullYear()-1):t.setFullYear(t.getFullYear()+1),y(t)},S=s=>{const t=new Date(i),a=s==="prev"?-10:10;t.setFullYear(t.getFullYear()+a),y(t)},V=()=>{y(new Date)},P=()=>{const s=i.getFullYear(),t=[];for(let a=0;a<12;a++){const l=d.filter(n=>{const r=new Date(n.vesting_date);return r.getFullYear()===s&&r.getMonth()===a});t.push({month:a,monthName:j[a],events:l,totalShares:l.reduce((n,r)=>n+r.shares_to_vest,0),eventCount:l.length})}return t},g=x.useMemo(()=>P(),[i,d]),_=x.useMemo(()=>{const s=i.getFullYear(),t=i.getMonth();return d.filter(a=>{const l=new Date(a.vesting_date);return l.getFullYear()===s&&l.getMonth()===t}).length},[d,i]),p=x.useMemo(()=>{const s=d.map(l=>new Date(l.vesting_date).getFullYear()).filter(l=>!Number.isNaN(l));if(s.length===0){const l=i.getFullYear(),n=l+9;return{start:l,end:n,label:`Upcoming 10 Years (${l} – ${n})`,derivedFromEvents:!1}}const t=Math.min(...s),a=Math.max(...s);return{start:t,end:a,label:`Vesting Outlook (${t} – ${a})`,derivedFromEvents:!0}},[d,i]),o=x.useMemo(()=>{const{start:s,end:t}=p;if(s===void 0||t===void 0||t<s)return[];const a=t-s+1;return Array.from({length:Math.max(a,0)},(l,n)=>{const r=s+n,f=d.filter(c=>new Date(c.vesting_date).getFullYear()===r),N=f.reduce((c,v)=>c+v.shares_to_vest,0),u=f.reduce((c,v)=>{const F=new Date(v.vesting_date).getMonth();return c[F]=(c[F]??0)+1,c},{}),[w]=Object.entries(u).sort(([,c],[,v])=>v-c)[0]??[];return{year:r,eventCount:f.length,totalShares:N,peakMonth:w!==void 0?j[Number(w)]:null,sampleEvents:f.slice(0,3)}})},[d,j,p]),b=x.useMemo(()=>{if(o.length===0)return{totalEvents:0,totalShares:0,activeYears:0,peakYear:null};const s=o.reduce((n,r)=>n+r.eventCount,0),t=o.reduce((n,r)=>n+r.totalShares,0),a=o.filter(n=>n.eventCount>0).length,l=o.reduce((n,r)=>r.eventCount>n.eventCount?r:n,o[0]);return{totalEvents:s,totalShares:t,activeYears:a,peakYear:l.eventCount>0?l.year:null}},[o]),O=x.useMemo(()=>{switch(m){case"monthly":return _;case"annually":return g.reduce((s,t)=>s+t.eventCount,0);case"decade":return o.reduce((s,t)=>s+t.eventCount,0);default:return 0}},[m,_,g,o]),C=s=>{switch(s){case"cliff":return"bg-orange-500";case"time_based":return"bg-blue-500";case"performance_based":return"bg-purple-500";default:return"bg-gray-500"}},D=s=>{switch(s){case"due":return"border-red-500 bg-red-50";case"pending":return"border-blue-500 bg-blue-50";case"vested":return"border-green-500 bg-green-50";case"exercised":case"transferred":return"border-gray-500 bg-gray-50";default:return"border-gray-300 bg-gray-50"}};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 w-full max-w-full overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col gap-3 p-3 sm:p-4 border-b border-gray-200 w-full max-w-full",children:[e.jsxs("div",{className:"flex items-center justify-between w-full max-w-full gap-2",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-gray-900 flex-1 min-w-0 truncate",children:m==="monthly"?`${j[i.getMonth()]} ${i.getFullYear()}`:m==="annually"?`${i.getFullYear()}`:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline truncate block",children:p.label}),e.jsxs("span",{className:"sm:hidden truncate block",children:[p.start," - ",p.end]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("button",{onClick:V,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 active:bg-blue-300 transition whitespace-nowrap touch-manipulation",children:"Today"}),e.jsx("div",{className:"inline-flex h-7 sm:h-8 w-7 sm:w-8 items-center justify-center rounded-full bg-gray-900 text-xs sm:text-sm font-semibold text-white flex-shrink-0",title:"Total vesting events in view",children:O})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 w-full max-w-full",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-0.5 sm:p-1 w-full sm:flex-1 sm:min-w-0 sm:max-w-full",children:[e.jsxs("button",{onClick:()=>M("monthly"),className:`flex items-center justify-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1.5 sm:py-1 rounded-md text-[10px] sm:text-sm font-medium transition flex-1 sm:flex-none touch-manipulation min-w-0 ${m==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 active:bg-gray-200"}`,children:[e.jsx(U,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Monthly"}),e.jsx("span",{className:"sm:hidden",children:"M"})]}),e.jsxs("button",{onClick:()=>M("annually"),className:`flex items-center justify-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1.5 sm:py-1 rounded-md text-[10px] sm:text-sm font-medium transition flex-1 sm:flex-none touch-manipulation min-w-0 ${m==="annually"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 active:bg-gray-200"}`,children:[e.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Annually"}),e.jsx("span",{className:"sm:hidden",children:"Y"})]}),e.jsxs("button",{onClick:()=>M("decade"),className:`flex items-center justify-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1.5 sm:py-1 rounded-md text-[10px] sm:text-sm font-medium transition flex-1 sm:flex-none touch-manipulation min-w-0 ${m==="decade"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 active:bg-gray-200"}`,children:[e.jsx(R,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden lg:inline truncate",children:"10-Year Outlook"}),e.jsx("span",{className:"hidden sm:inline lg:hidden truncate",children:"10Y Outlook"}),e.jsx("span",{className:"sm:hidden",children:"10Y"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0 self-center sm:self-auto",children:[e.jsx("button",{onClick:()=>{m==="monthly"?Y("prev"):m==="annually"?k("prev"):p.derivedFromEvents||S("prev")},className:"p-1.5 sm:p-2 hover:bg-gray-100 active:bg-gray-200 rounded-md transition touch-manipulation","aria-label":"Previous",children:e.jsx(I,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>{m==="monthly"?Y("next"):m==="annually"?k("next"):p.derivedFromEvents||S("next")},className:"p-1.5 sm:p-2 hover:bg-gray-100 active:bg-gray-200 rounded-md transition touch-manipulation","aria-label":"Next",children:e.jsx(B,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"})})]})]})]}),e.jsx("div",{className:"p-2 sm:p-4 w-full max-w-full overflow-x-auto",children:m==="monthly"?e.jsx("div",{className:"overflow-x-auto -mx-2 sm:mx-0 px-2 sm:px-0",children:e.jsxs("div",{className:"min-w-[600px]",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:A.map(s=>e.jsx("div",{className:"p-1.5 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T.map((s,t)=>e.jsxs("div",{className:`min-h-[90px] sm:min-h-[100px] p-1.5 sm:p-2 border rounded-lg ${s.isCurrentMonth?"bg-white":"bg-gray-50"} ${s.isToday?"ring-2 ring-blue-500":"border-gray-200"}`,children:[e.jsx("div",{className:`text-xs sm:text-sm font-medium mb-1 ${s.isCurrentMonth?"text-gray-900":"text-gray-400"} ${s.isToday?"text-blue-600":""}`,children:s.date.getDate()}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1",children:[s.events.slice(0,2).map((a,l)=>e.jsxs("div",{onClick:()=>h==null?void 0:h(a),className:`p-0.5 sm:p-1 rounded text-[10px] sm:text-xs cursor-pointer hover:opacity-80 active:opacity-60 transition touch-manipulation ${D(a.status)}`,title:`${a.employee_name} - ${a.plan_name} (${a.shares_to_vest} shares)`,children:[e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${C(a.event_type)} flex-shrink-0`}),e.jsx("span",{className:"truncate font-medium text-[10px] sm:text-xs",children:a.employee_name.split(" ")[0]})]}),e.jsx("div",{className:"text-gray-600 truncate text-[9px] sm:text-[10px]",children:Math.floor(a.shares_to_vest).toLocaleString()})]},a.id)),s.events.length>2&&e.jsxs("div",{className:"text-[9px] sm:text-[10px] text-gray-500 text-center py-0.5",children:["+",s.events.length-2]})]})]},t))})]})}):m==="annually"?e.jsxs("div",{className:"space-y-4 w-full max-w-full",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 w-full max-w-full",children:g.map(s=>e.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border transition hover:shadow-md ${s.eventCount>0?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900",children:s.monthName}),s.eventCount>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full whitespace-nowrap",children:[s.eventCount," events"]})]}),s.eventCount>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"font-medium",children:Math.floor(s.totalShares).toLocaleString()})]}),e.jsxs("div",{className:"space-y-1",children:[s.events.slice(0,3).map(t=>e.jsxs("div",{onClick:()=>h==null?void 0:h(t),className:"flex items-center justify-between p-2 bg-white rounded cursor-pointer hover:bg-gray-50 active:bg-gray-100 transition touch-manipulation",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C(t.event_type)} flex-shrink-0`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium truncate",children:t.employee_name.split(" ")[0]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:new Date(t.vesting_date).getDate()}),e.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${D(t.status)} whitespace-nowrap`,children:t.status.charAt(0).toUpperCase()})]})]},t.id)),s.events.length>3&&e.jsx("div",{className:"text-center py-1",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.events.length-3," more events"]})})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"No events"})]})]},s.month))}),e.jsxs("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-3",children:[i.getFullYear()," Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Events:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:g.reduce((s,t)=>s+t.eventCount,0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:Math.floor(g.reduce((s,t)=>s+t.totalShares,0)).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Active Months:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:g.filter(s=>s.eventCount>0).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Peak Month:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:g.reduce((s,t)=>t.eventCount>s.eventCount?t:s).monthName})]})]})]})]}):e.jsxs("div",{className:"space-y-4 w-full max-w-full",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 w-full max-w-full",children:o.map(s=>e.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border transition hover:shadow-md ${s.eventCount>0?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900",children:s.year}),s.eventCount>0&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full whitespace-nowrap",children:[s.eventCount," events"]})]}),s.eventCount>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-0 text-xs sm:text-sm mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Math.floor(s.totalShares).toLocaleString()})]}),s.peakMonth&&e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Peak month: "}),e.jsx("span",{className:"font-medium text-gray-900",children:s.peakMonth})]}),e.jsx("div",{className:"space-y-1.5 sm:space-y-2",children:s.sampleEvents.map(t=>e.jsxs("div",{onClick:()=>h==null?void 0:h(t),className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-2 p-2 bg-white rounded cursor-pointer border border-gray-200 hover:bg-gray-50 active:bg-gray-100 transition touch-manipulation",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C(t.event_type)} flex-shrink-0`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium truncate",children:t.employee_name.split(" ")[0]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-5 sm:ml-2",children:[e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500 whitespace-nowrap",children:[j[new Date(t.vesting_date).getMonth()]," ",new Date(t.vesting_date).getDate()]}),e.jsx("span",{className:`px-1.5 py-0.5 text-[10px] sm:text-xs rounded ${D(t.status)} whitespace-nowrap`,children:t.status.charAt(0).toUpperCase()})]})]},t.id))}),s.sampleEvents.length<s.eventCount&&e.jsx("div",{className:"text-center py-1",children:e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-500",children:["+",s.eventCount-s.sampleEvents.length," more events"]})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"No events"})]})]},s.year))}),e.jsxs("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-3",children:"Upcoming 10-Year Summary"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Events:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:b.totalEvents})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Shares:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:Math.floor(b.totalShares).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Active Years:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:b.activeYears})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Peak Year:"}),e.jsx("span",{className:"ml-2 font-medium block sm:inline",children:b.peakYear??"—"})]})]})]})]})}),e.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 border-t border-gray-200 pt-3 sm:pt-4 w-full max-w-full overflow-hidden",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-start sm:items-center gap-3 sm:gap-4 text-xs sm:text-sm w-full max-w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Event Types:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-orange-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Cliff"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-blue-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Vesting"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-purple-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Performance"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 border-2 border-red-500 bg-red-50 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Due"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 border-2 border-blue-500 bg-blue-50 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 border-2 border-green-500 bg-green-50 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:"Vested"})]})]})]})})]})}export{z as V};
